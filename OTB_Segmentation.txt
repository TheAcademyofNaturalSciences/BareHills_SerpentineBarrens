add these paths to System variables
1. PYTHONPATH > C:\OTB\lib\python3
2. Path > C:\OTB\bin
3. OTB_APPLICATION_PATH > C:\OTB\lib\otb\applications

Run the batch file for the otb environment
C:\OTB\otbenv.bat

Create a new Conda environment
conda create -n OTB python=3.5 anaconda
activate OTB
conda install numpy gdal

# ALL TOGETHER
cd T:\WilliamPenn_Share\EDS\BARE_HILLS\DATA\SPATIAL
mkdir segout
cd segout

# The combined algorithm
otbcli_LargeScaleMeanShift -in ../naip4b_2015_prj.tif -spatialr 5 -ranger 15 -minsize 10 -mode.vector.out segmentation_merged.shp

# Remove everything and try some new parameters
# These parameters below are good if we were making a land cover dataset, buildings and trees break out well
# For the purposes here they might be too coarse
del T:\WilliamPenn_Share\EDS\BARE_HILLS\DATA\SPATIAL\segout\*
otbcli_LargeScaleMeanShift -in ../naip4b_2015_prj.tif -spatialr 10 -ranger 70 -minsize 15 -mode.vector.out segmentation_merged.shp

# Try again
del T:\WilliamPenn_Share\EDS\BARE_HILLS\DATA\SPATIAL\segout\*
otbcli_LargeScaleMeanShift -in ../naip4b_2015_prj.tif -spatialr 10 -ranger 40 -minsize 15 -mode.vector.out segmentation_merged.shp

# With the better dataset
del T:\WilliamPenn_Share\EDS\BARE_HILLS\DATA\SPATIAL\segout\*
otbcli_LargeScaleMeanShift -in ../barehills6in_prj.tif -spatialr 10 -ranger 40 -minsize 40 -mode.vector.out segmentation_merged.shp


# INDIVIDUAL ALGORITHMS

Processing algorithm…
Algorithm 'MeanShiftSmoothing' starting…
Input parameters:
{ 'in' : 'D:/DATA/SPATIAL/Imagery/BareHills/barehills_6in.tif'
, 'fout' : 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/mss_sfo_01.tif'
, 'foutpos' : 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/mss_sfdo_01.tif'
, 'spatialr' : 5
, 'ranger' : 15
, 'thres' : 0.1
, 'maxiter' : 100
, 'rangeramp' : 0
, 'modesearch' : False
, 'outputpixeltype' : 5 }

otbcli_MeanShiftSmoothing -in 'D:/DATA/SPATIAL/Imagery/BareHills/barehills_6in.tif' -fout 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/mss_sfo_01.tif' -foutpos 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/mss_sfdo_01.tif' -spatialr 5 -ranger 15 -thres 0.1 -maxiter 100 -rangeramp 0 -modesearch False -outputpixeltype 5


Processing algorithm…
Algorithm 'LSMSSegmentation' starting…
Input parameters:
{ 'in' : 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/mss_sfo_01.tif',
 'inpos' : None,
 'out' : 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/lsmsseg_oli_01.tif',
 'spatialr' : 5,
 'ranger' : 15,
 'minsize' : 0,
 'tilesizex' : 500,
 'tilesizey' : 500,
 'tmpdir' : '',
 'cleanup' : True,
 'outputpixeltype' : 5 }

otbcli_LSMSSegmentation -in 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/mss_sfo_01.tif' -inpos None -out 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/lsmsseg_oli_01.tif' -spatialr 5 -ranger 15 -minsize 0 -tilesizex 500 -tilesizey 500 -tmpdir  -cleanup True -outputpixeltype 5


Processing algorithm…
Algorithm 'LSMSSmallRegionsMerging' starting…
Input parameters:
{ 'in' : 'D:/DATA/SPATIAL/Imagery/BareHills/barehills_6in.tif',
 'inseg' : 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/lsmsseg_oli_01.tif',
 'out' : 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/lsmsssrm_oi_01.tif',
 'minsize' : 40,
 'tilesizex' : 500,
 'tilesizey' : 500,
 'outputpixeltype' : 5 }

otbcli_LSMSSmallRegionsMerging in 'D:/DATA/SPATIAL/Imagery/BareHills/barehills_6in.tif' -inseg 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/lsmsseg_oli_01.tif' -out 'T:/WilliamPenn_Share/EDS/BARE_HILLS/DATA/SPATIAL/Segmentation/lsmsssrm_oi_01.tif' -minsize 40 -tilesizex 500 -tilesizey 500 -outputpixeltype 5






































